<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>LNMP环境配置-Ubuntu18.04 | The Long Farewell</title>
<meta name=keywords content="Web,Blog,Linux,Ubuntu,云服务器">
<meta name=description content="前言 lamp 的全称是linux + apache + mysql +php lnmp 的全称是linux + nginx + mysql + php （国外喜欢简称为LEMP，搜英文资料需要搜LEMP） Nginx 特性Nginx 性能稳">
<meta name=author content="Einsam">
<link rel=canonical href=https://snitxmhm.github.io/posts/lnmp%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-ubuntu18-04/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style>
<link rel=preload href=/logo.png as=image>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://snitxmhm.github.io/img>
<link rel=icon type=image/png sizes=16x16 href=https://snitxmhm.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://snitxmhm.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://snitxmhm.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://snitxmhm.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.91.2">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><meta property="og:title" content="LNMP环境配置-Ubuntu18.04">
<meta property="og:description" content="前言 lamp 的全称是linux + apache + mysql +php lnmp 的全称是linux + nginx + mysql + php （国外喜欢简称为LEMP，搜英文资料需要搜LEMP） Nginx 特性Nginx 性能稳">
<meta property="og:type" content="article">
<meta property="og:url" content="https://snitxmhm.github.io/posts/lnmp%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-ubuntu18-04/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2020-04-18T22:03:55+08:00">
<meta property="article:modified_time" content="2020-04-18T22:03:55+08:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="LNMP环境配置-Ubuntu18.04">
<meta name=twitter:description content="前言 lamp 的全称是linux + apache + mysql +php lnmp 的全称是linux + nginx + mysql + php （国外喜欢简称为LEMP，搜英文资料需要搜LEMP） Nginx 特性Nginx 性能稳">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://snitxmhm.github.io/posts/"},{"@type":"ListItem","position":2,"name":"LNMP环境配置-Ubuntu18.04","item":"https://snitxmhm.github.io/posts/lnmp%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-ubuntu18-04/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"LNMP环境配置-Ubuntu18.04","name":"LNMP环境配置-Ubuntu18.04","description":"前言 lamp 的全称是linux + apache + mysql +php lnmp 的全称是linux + nginx + mysql + php （国外喜欢简称为LEMP，搜英文资料需要搜LEMP） Nginx 特性Nginx 性能稳","keywords":["Web","Blog","Linux","Ubuntu","云服务器"],"articleBody":"前言 lamp 的全称是linux + apache + mysql +php lnmp 的全称是linux + nginx + mysql + php （国外喜欢简称为LEMP，搜英文资料需要搜LEMP） Nginx 特性Nginx 性能稳定、功能丰富、运维简单、处理静态文件速度快且消耗系统资源极少。\n 相比 Apache，用 Nginx 作为 Web 服务器：使用资源更少，支持更多并发连接，效率更高。 作为负载均衡服务器：Nginx 既可在内部直接支持 Rails 和 PHP，也可支持作为 HTTP 代理服务器对外进行服务。Nginx 用 C 编写而成， 不论是系统资源开销还是 CPU 使用效率都比 Perlbal 要好的多。 作为邮件代理服务器：Nginx 同时也是一款非常优秀的邮件代理服务器（最早开发这个产品的目的之一，是作为邮件代理服务器）。 反向代理可以根据url将请求转向于不同用途的集群，比如图片请求，转向图片服务器集群；视频请求，转身视频服务器集群。  nginx是一款轻量级的web服务器/反向代理服务器/电子邮件代理服务器，安装非常简单，配置文件也很简洁（还支持 perl 语法）。Nginx 支持平滑加载新配置，还能够在不间断服务的情况下进行软件版本升级。\n作者：西蒙宫 链接：https://www.zhihu.com/question/19697826/answer/142110770 来源：知乎 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n在本指南中，我们将安装一个 LNMP Stack (Nginx，MySQL，PHP) ，并在 Ubuntu Server 18.04 / 19.10上配置一个 web 服务器。 先决条件: 你应该使用具有sudo权限的用户账户，或者root账户  1. Install Nginx 让我们从更新软件包列表和在 Ubuntu 18.04 / 19.10上安装 Nginx 开始。 下面我们用 \u0026 \u0026 分隔两个命令。 第一个命令将更新包列表，以确保您获得 Nginx 的最新版本和依赖项。 然后，第二个命令将下载并安装 Nginx。\nsudo apt update \u0026\u0026 sudo apt install nginx 安装后，检查 Nginx 服务是否正在运行\nsudo service nginx status 如果 Nginx 正常运行，您应该会看到下面的绿色活动状态。\n● nginx.service - A high performance web server and a reverse proxy server Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled) Active: active (running) since Wed 2018-05-09 20:42:29 UTC; 2min 39s ago Docs: man:nginx(8) Process: 27688 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS) Process: 27681 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS) Main PID: 27693 (nginx) Tasks: 2 (limit: 1153) CGroup: /system.slice/nginx.service ├─27693 nginx: master process /usr/sbin/nginx -g daemon on; master_process on; └─27695 nginx: worker process 您可能需要按 q 退出服务状态。\n2. Configure Firewall 配置防火墙\n如果您还没有这样做，建议您启用 ufw 防火墙并为 Nginx 添加一个规则。 在启用 ufw 防火墙之前，请确保为 SSH 添加了一个规则，否则，如果远程连接，可能会被锁定在服务器之外。\nsudo ufw allow OpenSSH 查看可以开放的应用\nsudo ufw app list 现在为Nginx增加一条规则\nsudo ufw allow 'Nginx HTTP' 可以看到\nRule added Rule added (v6) 启用ufwfirewall\nsudo ufw enable 按y允许启用\n现在检查防火墙状态\nsudo ufw status Status: active To Action From -- ------ ---- OpenSSH ALLOW Anywhere Nginx HTTP ALLOW Anywhere OpenSSH (v6) ALLOW Anywhere (v6) Nginx HTTP (v6) ALLOW Anywhere (v6) 就是这样! 你在 Ubuntu 18.04 / 19.10上的 Nginx 网络服务器现在应该准备好了。\n3. Test Nginx 进入你的网页浏览器，访问你的域名或 IP 地址。 如果你还没有域名，并且不知道你的 IP 地址，你可以通过运行:\nip a | grep -Eo 'inet (addr:)?([0-9]*\\.){3}[0-9]*' | grep -Eo '([0-9]*\\.){3}[0-9]*' | grep -v '127.0.0.1' 如果使用的是云服务器 则可以直接使用公网ip在本地的浏览器输入\n您可以在文档根目录 / var / www / html 中找到这个 Nginx 默认欢迎页面。 要在文本编辑器中编辑这个文件:\nsudo vim /var/www/html/index.nginx-debian.html 你的 Nginx 网络服务器已经准备好了！ 现在可以在 / var / www / html 目录中添加自己的 html 文件和图像。\n4. Install MySQL 让我们从更新软件包列表和在 Ubuntu 18.04 / 19.10上安装 MySQL 开始。 下面我们用 \u0026 \u0026 分隔两个命令。 第一个命令将更新包列表，以确保您获得 MySQL 的最新版本和依赖项。 然后，第二个命令将下载并安装 MySQL。\nsudo apt update \u0026\u0026 apt install mysql-server 当提示安装 MySQL 包时，按 y 键和 ENTER 键。 一旦包安装程序完成，我们就可以检查 MySQL 服务是否正在运行。\nsudo service mysql status 如果运行，你会看到一个绿色的活动状态，如下所示。\n● mysql.service - MySQL Community Server Loaded: loaded (/lib/systemd/system/mysql.service; enabled; vendor preset: enabled) Active: active (running) since since Wed 2018-05-09 21:10:24 UTC; 16s ago Main PID: 30545 (mysqld) Tasks: 27 (limit: 1153) CGroup: /system.slice/mysql.service └─30545 /usr/sbin/mysqld --daemonize --pid-file=/run/mysqld/mysqld.pid 您可能需要按 q 退出服务状态。\n5.配置 MySQL Security 现在应该运行 MySQL 安全安装来配置 MySQL 服务器的安全性。\nsudo mysql_secure_installation 如果您在步骤1中创建了根密码，可能会提示您在这里输入它。 否则你将被要求创建一个。 (在这里输入密码)\n您将被问及是否需要设置验证密码插件。 除非您出于某种原因希望实施严格的密码策略，否则实际上没有必要这样做。\nSecuring the MySQL server deployment. Connecting to MySQL using a blank password. VALIDATE PASSWORD PLUGIN can be used to test passwords and improve security. It checks the strength of password and allows the users to set only those passwords which are secure enough. Would you like to setup VALIDATE PASSWORD plugin? Press y|Y for Yes, any other key for No: 如果您不想设置验证密码插件，请在这里按 n 和 ENTER。\nPlease set the password for root here. New password: Re-enter new password: 如果在步骤1中没有创建 root 密码，那么现在必须在这里创建一个。 生成一个强密码并输入它。 请注意，当您在 Linux 中输入密码时，输入时不会显示任何信息(没有星号或点)。\nBy default, a MySQL installation has an anonymous user, allowing anyone to log into MySQL without having to have a user account created for them. This is intended only for testing, and to make the installation go a bit smoother. You should remove them before moving into a production environment. Remove anonymous users? (Press y|Y for Yes, any other key for No) : 按 y 和 ENTER 以删除匿名用户。\nNormally, root should only be allowed to connect from 'localhost'. This ensures that someone cannot guess at the root password from the network. Disallow root login remotely? (Press y|Y for Yes, any other key for No) : 按 y 和 ENTER 远程禁止 root 登录。 这将防止僵尸和黑客试图猜测根密码。\nBy default, MySQL comes with a database named 'test' that anyone can access. This is also intended only for testing, and should be removed before moving into a production environment. Remove test database and access to it? (Press y|Y for Yes, any other key for No) : 按 y 和 ENTER 以删除测试数据库。\nReloading the privilege tables will ensure that all changes made so far will take effect immediately. Reload privilege tables now? (Press y|Y for Yes, any other key for No) : 按 y 和 ENTER 重新加载特权表。\n完成\n作为测试，您可以登录到 MySQL 服务器并运行 version 命令。\nsudo mysqladmin -p -u root version 输入您先前创建的 MySQL root 密码，您应该会看到以下内容:\nmysqladmin Ver 8.42 Distrib 5.7.22, for Linux on x86_64 Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Server version 5.7.22-0ubuntu18.04.1 Protocol version 10 Connection Localhost via UNIX socket UNIX socket /var/run/mysqld/mysqld.sock Uptime: 4 min 28 sec Threads: 1 Questions: 15 Slow queries: 0 Opens: 113 Flush tables: 1 Open tables: 106 Queries per second avg: 0.055 您现在已经成功地为 Ubuntu 18.04 / 19.10安装和配置了 MySQL！ 继续下一步安装 PHP。\n6. Install PHP 与 Apache 不同，Nginx 不包含本地 PHP 处理。 为此，我们必须安装 PHP-FPM (FastCGI 流程管理器)。 Fpm 是一种替代的 PHP FastCGI 实现，具有一些对重载站点有用的附加特性。\n让我们首先更新软件包列表并在 Ubuntu 18.04 / 19.10上安装 PHP-FPM。 我们还将安装 PHP-MySQL，以允许 PHP 与 MySQL 数据库通信。 下面我们用 \u0026 \u0026 分隔两个命令。 第一个命令将更新包列表，以确保您获得 PHP-FPM 和 php-mysql 的最新版本和依赖项。 然后，第二个命令将下载并安装 PHP-FPM 和 php-mysql。 请求继续时按 y 和 ENTER。\nsudo apt update \u0026\u0026 sudo apt install php-fpm php-mysql 一旦安装，请检查 PHP 版本。\nphp --version 如果 PHP 安装正确，您应该会看到与下面类似的内容。\nPHP 7.2.3-1ubuntu1 (cli) (built: Mar 14 2018 22:03:58) ( NTS ) Copyright (c) 1997-2018 The PHP Group Zend Engine v3.2.0, Copyright (c) 1998-2018 Zend Technologies with Zend OPcache v7.2.3-1ubuntu1, Copyright (c) 1999-2018, by Zend Technologies 上面我们使用的是 PHP 版本7.2，不过这可能是一个更新的版本，具体取决于存储库中的哪个包。\n根据您安装的是哪个版本的 Nginx 和 PHP，您可能需要手动配置 Nginx 将连接到的 PHP 套接字的位置。\n列出目录 / var / run / php / 的内容\nls /var/run/php/ 你应该在这里看到一些条目。\nphp7.2-fpm.pid php7.2-fpm.sock 上面我们可以看到这个接口被称为 php7.2-fpm.sock。请记住这一点，因为下一步可能需要它。\n7. Configure Nginx for PHP 现在我们需要对 Nginx 服务器块进行一些更改。\n服务器块的位置可能根据您的设置而有所不同。默认情况下，它位于 / etc / nginx / sites-available / default。\n但是，如果您以前在我们前面的一个指南中为多个域设置了自定义服务器块，那么您将需要将 PHP 指令分别添加到每个服务器块中。 典型的自定义服务器块文件位置是 / etc / nginx / sites-available / mytest1. com。\n目前，我们假设您正在使用默认值。\nsudo vim /etc/nginx/sites-availiable/default 查找index.html\n在index.html前添加index.php\nindex index.php index.html index.htm index.nginx-debian.html; 查找server_name 在这里输入您的服务器 IP 或域名(如果有的话)。\nserver_name YOUR_DOMAIN_OR_IP_HERE; 查找location ~ \\.php\n在这里，您需要通过删除下面用红色标记的行前的 # 符号来取消某些行的注释。\n还要确保 fastcgi 传递套接字路径的值是正确的。 例如，如果您安装了 PHP 版本7.2，套接字应该是: / var / run / PHP / php7.2-fpm。 袜子\n... location ~ \\.php$ { include snippets/fastcgi-php.conf; # # # With php-fpm (or other unix sockets): fastcgi_pass unix:/var/run/php/php7.2-fpm.sock; # # With php-cgi (or other tcp sockets): # fastcgi_pass 127.0.0.1:9000; 这一行不应该取消注释否则会与上一行冲突 } ... 保存关闭\n现在检查配置文件以确保没有语法错误。 任何错误都可能导致 web 服务器在重启时崩溃。\nsudo nginx -t nginx: the configuration file /etc/nginx/nginx.conf syntax is ok nginx: configuration file /etc/nginx/nginx.conf test is successful 如果没有错误，可以重新加载 Nginx 配置。\nsudo service nginx reload 8. Test PHP 要查看在 Ubuntu 18.04 / 19.10上 PHP 是否正常工作，让我们在文档根目录中创建一个名为 info.PHP 的新 PHP 文件。 默认情况下，它位于 / var / www / html / ，或者如果您在以前的指南中设置了多个域，它可能位于像 / var / www / mytest1这样的地方。 Com / public html\n一旦你有了正确的文档根目录，使用 nano 文本编辑器创建一个新的 info.php 文件\nsudo vim /var/www/html/info.php 在新文件中键入或粘贴以下代码(如果在 Windows 中使用 PuTTY，右键单击粘贴)\n(); 保存退出现在，你可以通过浏览服务器的域名或公共 IP 地址，然后是 / info.php: http://your_domain_or_ip/info.php 地址，在你的网页浏览器中查看这个页面\n您现在已经在 Ubuntu 18.04 / 19.10上成功安装了针对 Nginx 的 PHP-FPM。\n","wordCount":"3451","inLanguage":"en","datePublished":"2020-04-18T22:03:55+08:00","dateModified":"2020-04-18T22:03:55+08:00","author":[{"@type":"Person","name":"Einsam"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://snitxmhm.github.io/posts/lnmp%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-ubuntu18-04/"},"publisher":{"@type":"Organization","name":"The Long Farewell","logo":{"@type":"ImageObject","url":"https://snitxmhm.github.io/img"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://snitxmhm.github.io/ accesskey=h title="Home (Alt + H)">
<img src=https://snitxmhm.github.io/logo.png alt=logo aria-label=logo height=35>Home</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://snitxmhm.github.io/archives/ title=Archive>
<span>Archive</span>
</a>
</li>
<li>
<a href=https://snitxmhm.github.io/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
<li>
<a href=https://snitxmhm.github.io/categories/ title=Categories>
<span>Categories</span>
</a>
</li>
<li>
<a href=https://snitxmhm.github.io/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://snitxmhm.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://snitxmhm.github.io/posts/>Posts</a></div>
<h1 class=post-title>
LNMP环境配置-Ubuntu18.04
</h1>
<div class=post-meta><span title="2020-04-18 22:03:55 +0800 +0800">April 18, 2020</span>&nbsp;·&nbsp;Einsam
</div>
</header> <div class=toc>
<details open>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul><ul>
<li>
<a href=#%e5%89%8d%e8%a8%80 aria-label=前言>前言</a></li>
<li>
<a href=#%e5%9c%a8%e6%9c%ac%e6%8c%87%e5%8d%97%e4%b8%ad%e6%88%91%e4%bb%ac%e5%b0%86%e5%ae%89%e8%a3%85%e4%b8%80%e4%b8%aa-lnmp-stack-nginxmysqlphp-%e5%b9%b6%e5%9c%a8-ubuntu-server-1804--1910%e4%b8%8a%e9%85%8d%e7%bd%ae%e4%b8%80%e4%b8%aa-web-%e6%9c%8d%e5%8a%a1%e5%99%a8 aria-label="在本指南中，我们将安装一个 LNMP Stack (Nginx，MySQL，PHP) ，并在 Ubuntu Server 18.04 / 19.10上配置一个 web 服务器。">在本指南中，我们将安装一个 LNMP Stack (Nginx，MySQL，PHP) ，并在 Ubuntu Server 18.04 / 19.10上配置一个 web 服务器。</a></li></ul>
<li>
<a href=#%e5%85%88%e5%86%b3%e6%9d%a1%e4%bb%b6 aria-label=先决条件:>先决条件:</a><ul>
<ul>
<li>
<a href=#%e4%bd%a0%e5%ba%94%e8%af%a5%e4%bd%bf%e7%94%a8%e5%85%b7%e6%9c%89sudo%e6%9d%83%e9%99%90%e7%9a%84%e7%94%a8%e6%88%b7%e8%b4%a6%e6%88%b7%e6%88%96%e8%80%85root%e8%b4%a6%e6%88%b7 aria-label=你应该使用具有sudo权限的用户账户，或者root账户>你应该使用具有sudo权限的用户账户，或者root账户</a></li></ul>
</ul>
</li>
<li>
<a href=#1-install-nginx aria-label="1. Install Nginx">1. Install Nginx</a></li>
<li>
<a href=#2-configure-firewall aria-label="2. Configure Firewall">2. Configure Firewall</a></li>
<li>
<a href=#3-test-nginx aria-label="3. Test Nginx">3. Test Nginx</a></li>
<li>
<a href=#4-install-mysql aria-label="4. Install MySQL">4. Install MySQL</a></li>
<li>
<a href=#5%e9%85%8d%e7%bd%ae-mysql-security aria-label="5.配置 MySQL Security">5.配置 MySQL Security</a></li>
<li>
<a href=#6-install-php aria-label="6. Install PHP">6. Install PHP</a></li>
<li>
<a href=#7-configure-nginx-for-php aria-label="7. Configure Nginx for PHP">7. Configure Nginx for PHP</a></li>
<li>
<a href=#8-test-php aria-label="8. Test PHP">8. Test PHP</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><h3 id=前言>前言<a hidden class=anchor aria-hidden=true href=#前言>#</a></h3>
<p>lamp 的全称是linux + apache + mysql +php
lnmp 的全称是linux + nginx + mysql + php （国外喜欢简称为LEMP，搜英文资料需要搜LEMP）
Nginx 特性Nginx 性能稳定、功能丰富、运维简单、处理静态文件速度快且消耗系统资源极少。</p>
<ol>
<li>相比 Apache，用 Nginx 作为 Web 服务器：使用资源更少，支持更多并发连接，效率更高。</li>
<li>作为负载均衡服务器：Nginx 既可在内部直接支持 Rails 和 PHP，也可支持作为 HTTP 代理服务器对外进行服务。Nginx 用 C 编写而成， 不论是系统资源开销还是 CPU 使用效率都比 Perlbal 要好的多。</li>
<li>作为邮件代理服务器：Nginx 同时也是一款非常优秀的邮件代理服务器（最早开发这个产品的目的之一，是作为邮件代理服务器）。</li>
<li>反向代理可以根据url将请求转向于不同用途的集群，比如图片请求，转向图片服务器集群；视频请求，转身视频服务器集群。</li>
</ol>
<p>nginx是一款轻量级的web服务器/反向代理服务器/电子邮件代理服务器，安装非常简单，配置文件也很简洁（还支持 perl 语法）。Nginx 支持平滑加载新配置，还能够在不间断服务的情况下进行软件版本升级。</p>
<p>作者：西蒙宫
链接：https://www.zhihu.com/question/19697826/answer/142110770
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<h3 id=在本指南中我们将安装一个-lnmp-stack-nginxmysqlphp-并在-ubuntu-server-1804--1910上配置一个-web-服务器>在本指南中，我们将安装一个 LNMP Stack (Nginx，MySQL，PHP) ，并在 Ubuntu Server 18.04 / 19.10上配置一个 web 服务器。<a hidden class=anchor aria-hidden=true href=#在本指南中我们将安装一个-lnmp-stack-nginxmysqlphp-并在-ubuntu-server-1804--1910上配置一个-web-服务器>#</a></h3>
<h2 id=先决条件>先决条件:<a hidden class=anchor aria-hidden=true href=#先决条件>#</a></h2>
<h4 id=你应该使用具有sudo权限的用户账户或者root账户>你应该使用具有sudo权限的用户账户，或者root账户<a hidden class=anchor aria-hidden=true href=#你应该使用具有sudo权限的用户账户或者root账户>#</a></h4>
<hr>
<h2 id=1-install-nginx>1. Install Nginx<a hidden class=anchor aria-hidden=true href=#1-install-nginx>#</a></h2>
<p>让我们从更新软件包列表和在 Ubuntu 18.04 / 19.10上安装 Nginx 开始。 下面我们用 & & 分隔两个命令。 第一个命令将更新包列表，以确保您获得 Nginx 的最新版本和依赖项。 然后，第二个命令将下载并安装 Nginx。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt update <span style=color:#f92672>&amp;&amp;</span> sudo apt install nginx
</code></pre></div><p>安装后，检查 Nginx 服务是否正在运行</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo service nginx status
</code></pre></div><p>如果 Nginx 正常运行，您应该会看到下面的绿色活动状态。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>● nginx.service - A high performance web server and a reverse proxy server
   Loaded: loaded <span style=color:#f92672>(</span>/lib/systemd/system/nginx.service; enabled; vendor preset: enabled<span style=color:#f92672>)</span>
   Active: active <span style=color:#f92672>(</span>running<span style=color:#f92672>)</span> since Wed 2018-05-09 20:42:29 UTC; 2min 39s ago
     Docs: man:nginx<span style=color:#f92672>(</span>8<span style=color:#f92672>)</span>
  Process: <span style=color:#ae81ff>27688</span> ExecStart<span style=color:#f92672>=</span>/usr/sbin/nginx -g daemon on; master_process on; <span style=color:#f92672>(</span>code<span style=color:#f92672>=</span>exited, status<span style=color:#f92672>=</span>0/SUCCESS<span style=color:#f92672>)</span>
  Process: <span style=color:#ae81ff>27681</span> ExecStartPre<span style=color:#f92672>=</span>/usr/sbin/nginx -t -q -g daemon on; master_process on; <span style=color:#f92672>(</span>code<span style=color:#f92672>=</span>exited, status<span style=color:#f92672>=</span>0/SUCCESS<span style=color:#f92672>)</span>
 Main PID: <span style=color:#ae81ff>27693</span> <span style=color:#f92672>(</span>nginx<span style=color:#f92672>)</span>
    Tasks: <span style=color:#ae81ff>2</span> <span style=color:#f92672>(</span>limit: 1153<span style=color:#f92672>)</span>
   CGroup: /system.slice/nginx.service
           ├─27693 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;
           └─27695 nginx: worker process
</code></pre></div><p>您可能需要按 q 退出服务状态。</p>
<h2 id=2-configure-firewall>2. Configure Firewall<a hidden class=anchor aria-hidden=true href=#2-configure-firewall>#</a></h2>
<p>配置防火墙</p>
<p>如果您还没有这样做，建议您启用 ufw 防火墙并为 Nginx 添加一个规则。 在启用 ufw 防火墙之前，请确保为 SSH 添加了一个规则，否则，如果远程连接，可能会被锁定在服务器之外。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo ufw allow OpenSSH
</code></pre></div><p>查看可以开放的应用</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo ufw app list
</code></pre></div><p>现在为<code>Nginx</code>增加一条规则</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo ufw allow <span style=color:#e6db74>&#39;Nginx HTTP&#39;</span>
</code></pre></div><p>可以看到</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Rule added
Rule added <span style=color:#f92672>(</span>v6<span style=color:#f92672>)</span>
</code></pre></div><p>启用<code>ufw</code>firewall</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo ufw enable
</code></pre></div><p>按<code>y</code>允许启用</p>
<p>现在检查防火墙状态</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo ufw status
Status: active

To                         Action      From
--                         ------      ----
OpenSSH                    ALLOW       Anywhere
Nginx HTTP                 ALLOW       Anywhere
OpenSSH <span style=color:#f92672>(</span>v6<span style=color:#f92672>)</span>               ALLOW       Anywhere <span style=color:#f92672>(</span>v6<span style=color:#f92672>)</span>
Nginx HTTP <span style=color:#f92672>(</span>v6<span style=color:#f92672>)</span>            ALLOW       Anywhere <span style=color:#f92672>(</span>v6<span style=color:#f92672>)</span>
</code></pre></div><p>就是这样! 你在 Ubuntu 18.04 / 19.10上的 Nginx 网络服务器现在应该准备好了。</p>
<h2 id=3-test-nginx>3. Test Nginx<a hidden class=anchor aria-hidden=true href=#3-test-nginx>#</a></h2>
<p>进入你的网页浏览器，访问你的域名或 IP 地址。 如果你还没有域名，并且不知道你的 IP 地址，你可以通过运行:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>ip a | grep -Eo <span style=color:#e6db74>&#39;inet (addr:)?([0-9]*\.){3}[0-9]*&#39;</span> | grep -Eo <span style=color:#e6db74>&#39;([0-9]*\.){3}[0-9]*&#39;</span> | grep -v <span style=color:#e6db74>&#39;127.0.0.1&#39;</span>
</code></pre></div><p><img loading=lazy src=https://devanswers.co/wp-content/uploads/2018/04/welcome-to-nginx-test-page.png alt=ip>
</p>
<p><strong>如果使用的是云服务器 则可以直接使用公网ip在本地的浏览器输入</strong></p>
<p>您可以在文档根目录 / var / www / html 中找到这个 Nginx 默认欢迎页面。 要在文本编辑器中编辑这个文件:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo vim /var/www/html/index.nginx-debian.html
</code></pre></div><p>你的 Nginx 网络服务器已经准备好了！ 现在可以在 / var / www / html 目录中添加自己的 html 文件和图像。</p>
<h2 id=4-install-mysql>4. Install MySQL<a hidden class=anchor aria-hidden=true href=#4-install-mysql>#</a></h2>
<p>让我们从更新软件包列表和在 Ubuntu 18.04 / 19.10上安装 MySQL 开始。 下面我们用 & & 分隔两个命令。 第一个命令将更新包列表，以确保您获得 MySQL 的最新版本和依赖项。 然后，第二个命令将下载并安装 MySQL。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt update <span style=color:#f92672>&amp;&amp;</span> apt install mysql-server
</code></pre></div><p>当提示安装 MySQL 包时，按 y 键和 ENTER 键。
一旦包安装程序完成，我们就可以检查 MySQL 服务是否正在运行。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo service mysql status
</code></pre></div><p>如果运行，你会看到一个绿色的活动状态，如下所示。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>● mysql.service - MySQL Community Server
Loaded: loaded <span style=color:#f92672>(</span>/lib/systemd/system/mysql.service; enabled; vendor preset: enabled<span style=color:#f92672>)</span>
Active: active <span style=color:#f92672>(</span>running<span style=color:#f92672>)</span> since since Wed 2018-05-09 21:10:24 UTC; 16s ago
 Main PID: <span style=color:#ae81ff>30545</span> <span style=color:#f92672>(</span>mysqld<span style=color:#f92672>)</span>
    Tasks: <span style=color:#ae81ff>27</span> <span style=color:#f92672>(</span>limit: 1153<span style=color:#f92672>)</span>
   CGroup: /system.slice/mysql.service
           └─30545 /usr/sbin/mysqld --daemonize --pid-file<span style=color:#f92672>=</span>/run/mysqld/mysqld.pid
</code></pre></div><p>您可能需要按 q 退出服务状态。</p>
<h2 id=5配置-mysql-security>5.配置 MySQL Security<a hidden class=anchor aria-hidden=true href=#5配置-mysql-security>#</a></h2>
<p>现在应该运行 MySQL 安全安装来配置 MySQL 服务器的安全性。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo mysql_secure_installation
</code></pre></div><p>如果您在步骤1中创建了根密码，可能会提示您在这里输入它。 否则你将被要求创建一个。 (在这里输入密码)</p>
<p>您将被问及是否需要设置验证密码插件。 除非您出于某种原因希望实施严格的密码策略，否则实际上没有必要这样做。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Securing the MySQL server deployment.

Connecting to MySQL using a blank password.

VALIDATE PASSWORD PLUGIN can be used to test passwords
and improve security. It checks the strength of password
and allows the users to set only those passwords which are
secure enough. Would you like to setup VALIDATE PASSWORD plugin?

Press y|Y <span style=color:#66d9ef>for</span> Yes, any other key <span style=color:#66d9ef>for</span> No:
</code></pre></div><p>如果您不想设置验证密码插件，请在这里按 n 和 ENTER。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Please set the password <span style=color:#66d9ef>for</span> root here.

New password:

Re-enter new password:
</code></pre></div><p>如果在步骤1中没有创建 root 密码，那么现在必须在这里创建一个。
生成一个强密码并输入它。 请注意，当您在 Linux 中输入密码时，输入时不会显示任何信息(没有星号或点)。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>By default, a MySQL installation has an anonymous user,
allowing anyone to log into MySQL without having to have
a user account created <span style=color:#66d9ef>for</span> them. This is intended only <span style=color:#66d9ef>for</span>
testing, and to make the installation go a bit smoother.
You should remove them before moving into a production
environment.

Remove anonymous users? <span style=color:#f92672>(</span>Press y|Y <span style=color:#66d9ef>for</span> Yes, any other key <span style=color:#66d9ef>for</span> No<span style=color:#f92672>)</span> :
</code></pre></div><p>按 y 和 ENTER 以删除匿名用户。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Normally, root should only be allowed to connect from
<span style=color:#e6db74>&#39;localhost&#39;</span>. This ensures that someone cannot guess at
the root password from the network.

Disallow root login remotely? <span style=color:#f92672>(</span>Press y|Y <span style=color:#66d9ef>for</span> Yes, any other key <span style=color:#66d9ef>for</span> No<span style=color:#f92672>)</span> :
</code></pre></div><p>按 y 和 ENTER 远程禁止 root 登录。 这将防止僵尸和黑客试图猜测根密码。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>By default, MySQL comes with a database named <span style=color:#e6db74>&#39;test&#39;</span> that
anyone can access. This is also intended only <span style=color:#66d9ef>for</span> testing,
and should be removed before moving into a production
environment.

Remove test database and access to it? <span style=color:#f92672>(</span>Press y|Y <span style=color:#66d9ef>for</span> Yes, any other key <span style=color:#66d9ef>for</span> No<span style=color:#f92672>)</span> :
</code></pre></div><p>按 y 和 ENTER 以删除测试数据库。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Reloading the privilege tables will ensure that all changes
made so far will take effect immediately.

Reload privilege tables now? <span style=color:#f92672>(</span>Press y|Y <span style=color:#66d9ef>for</span> Yes, any other key <span style=color:#66d9ef>for</span> No<span style=color:#f92672>)</span> :
</code></pre></div><p>按 y 和 ENTER 重新加载特权表。</p>
<p>完成</p>
<p>作为测试，您可以登录到 MySQL 服务器并运行 version 命令。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo mysqladmin -p -u root version
</code></pre></div><p>输入您先前创建的 MySQL root 密码，您应该会看到以下内容:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mysqladmin  Ver 8.42 Distrib 5.7.22, <span style=color:#66d9ef>for</span> Linux on x86_64
Copyright <span style=color:#f92672>(</span>c<span style=color:#f92672>)</span> 2000, 2018, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Server version          5.7.22-0ubuntu18.04.1
Protocol version        <span style=color:#ae81ff>10</span>
Connection              Localhost via UNIX socket
UNIX socket             /var/run/mysqld/mysqld.sock
Uptime:                 <span style=color:#ae81ff>4</span> min <span style=color:#ae81ff>28</span> sec

Threads: <span style=color:#ae81ff>1</span>  Questions: <span style=color:#ae81ff>15</span>  Slow queries: <span style=color:#ae81ff>0</span>  Opens: <span style=color:#ae81ff>113</span>  Flush tables: <span style=color:#ae81ff>1</span>  Open tables: <span style=color:#ae81ff>106</span>  Queries per second avg: 0.055
</code></pre></div><p>您现在已经成功地为 Ubuntu 18.04 / 19.10安装和配置了 MySQL！ 继续下一步安装 PHP。</p>
<h2 id=6-install-php>6. Install PHP<a hidden class=anchor aria-hidden=true href=#6-install-php>#</a></h2>
<p>与 Apache 不同，Nginx 不包含本地 PHP 处理。 为此，我们必须安装 PHP-FPM (FastCGI 流程管理器)。 Fpm 是一种替代的 PHP FastCGI 实现，具有一些对重载站点有用的附加特性。</p>
<p>让我们首先更新软件包列表并在 Ubuntu 18.04 / 19.10上安装 PHP-FPM。 我们还将安装 PHP-MySQL，以允许 PHP 与 MySQL 数据库通信。 下面我们用 & & 分隔两个命令。 第一个命令将更新包列表，以确保您获得 PHP-FPM 和 php-mysql 的最新版本和依赖项。 然后，第二个命令将下载并安装 PHP-FPM 和 php-mysql。 请求继续时按 y 和 ENTER。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt update <span style=color:#f92672>&amp;&amp;</span> sudo apt install php-fpm php-mysql
</code></pre></div><p>一旦安装，请检查 PHP 版本。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>php --version
</code></pre></div><p>如果 PHP 安装正确，您应该会看到与下面类似的内容。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>PHP 7.2.3-1ubuntu1 <span style=color:#f92672>(</span>cli<span style=color:#f92672>)</span> <span style=color:#f92672>(</span>built: Mar <span style=color:#ae81ff>14</span> <span style=color:#ae81ff>2018</span> 22:03:58<span style=color:#f92672>)</span> <span style=color:#f92672>(</span> NTS <span style=color:#f92672>)</span>
Copyright <span style=color:#f92672>(</span>c<span style=color:#f92672>)</span> 1997-2018 The PHP Group
Zend Engine v3.2.0, Copyright <span style=color:#f92672>(</span>c<span style=color:#f92672>)</span> 1998-2018 Zend Technologies
with Zend OPcache v7.2.3-1ubuntu1, Copyright <span style=color:#f92672>(</span>c<span style=color:#f92672>)</span> 1999-2018, by Zend Technologies
</code></pre></div><p>上面我们使用的是 PHP 版本7.2，不过这可能是一个更新的版本，具体取决于存储库中的哪个包。</p>
<p>根据您安装的是哪个版本的 Nginx 和 PHP，您可能需要手动配置 Nginx 将连接到的 PHP 套接字的位置。</p>
<p>列出目录 / var / run / php / 的内容</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>ls /var/run/php/
</code></pre></div><p>你应该在这里看到一些条目。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>php7.2-fpm.pid php7.2-fpm.sock
</code></pre></div><p>上面我们可以看到这个接口被称为 php7.2-fpm.sock。请记住这一点，因为下一步可能需要它。</p>
<h2 id=7-configure-nginx-for-php>7. Configure Nginx for PHP<a hidden class=anchor aria-hidden=true href=#7-configure-nginx-for-php>#</a></h2>
<p>现在我们需要对 Nginx 服务器块进行一些更改。</p>
<p>服务器块的位置可能根据您的设置而有所不同。默认情况下，它位于 / etc / nginx / sites-available / default。</p>
<p>但是，如果您以前在我们前面的一个指南中为多个域设置了自定义服务器块，那么您将需要将 PHP 指令分别添加到每个服务器块中。 典型的自定义服务器块文件位置是 / etc / nginx / sites-available / mytest1. com。</p>
<p>目前，我们假设您正在使用默认值。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo vim /etc/nginx/sites-availiable/default
</code></pre></div><p>查找<code>index.html</code></p>
<p>在<code>index.html</code>前添加<code>index.php</code></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>        index index.php index.html index.htm index.nginx-debian.html;
</code></pre></div><p>查找<code>server_name</code>
在这里输入您的服务器 IP 或域名(如果有的话)。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>        server_name YOUR_DOMAIN_OR_IP_HERE;
</code></pre></div><p>查找<code>location ~ \.php</code></p>
<p>在这里，您需要通过删除下面用红色标记的行前的 # 符号来取消某些行的注释。</p>
<p>还要确保 fastcgi 传递套接字路径的值是正确的。 例如，如果您安装了 PHP 版本7.2，套接字应该是: / var / run / PHP / php7.2-fpm。 袜子</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>...
        location ~ <span style=color:#ae81ff>\.</span>php$ <span style=color:#f92672>{</span>
                include snippets/fastcgi-php.conf;
        <span style=color:#75715e>#</span>
        <span style=color:#75715e>#       # With php-fpm (or other unix sockets):</span>
                fastcgi_pass unix:/var/run/php/php7.2-fpm.sock;
        <span style=color:#75715e>#       # With php-cgi (or other tcp sockets):</span>
        <span style=color:#75715e>#       fastcgi_pass 127.0.0.1:9000; 这一行不应该取消注释否则会与上一行冲突</span>
        <span style=color:#f92672>}</span>
...
</code></pre></div><p>保存关闭</p>
<p>现在检查配置文件以确保没有语法错误。 任何错误都可能导致 web 服务器在重启时崩溃。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
</code></pre></div><p>如果没有错误，可以重新加载 Nginx 配置。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo service nginx reload
</code></pre></div><h2 id=8-test-php>8. Test PHP<a hidden class=anchor aria-hidden=true href=#8-test-php>#</a></h2>
<p>要查看在 Ubuntu 18.04 / 19.10上 PHP 是否正常工作，让我们在文档根目录中创建一个名为 info.PHP 的新 PHP 文件。 默认情况下，它位于 / var / www / html / ，或者如果您在以前的指南中设置了多个域，它可能位于像 / var / www / mytest1这样的地方。 Com / public html</p>
<p>一旦你有了正确的文档根目录，使用 nano 文本编辑器创建一个新的 info.php 文件</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo vim /var/www/html/info.php
</code></pre></div><p>在新文件中键入或粘贴以下代码(如果在 Windows 中使用 PuTTY，右键单击粘贴)</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&lt;?php
phpinfo<span style=color:#f92672>()</span>;
</code></pre></div><p>保存退出现在，你可以通过浏览服务器的域名或公共 IP 地址，然后是 / info.php: http://your_domain_or_ip/info.php 地址，在你的网页浏览器中查看这个页面</p>
<p><img loading=lazy src="https://devanswers.co/?attachment_id=2541" alt=php>
您现在已经在 Ubuntu 18.04 / 19.10上成功安装了针对 Nginx 的 PHP-FPM。</p>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://snitxmhm.github.io/tags/web/>Web</a></li>
<li><a href=https://snitxmhm.github.io/tags/blog/>Blog</a></li>
<li><a href=https://snitxmhm.github.io/tags/linux/>Linux</a></li>
<li><a href=https://snitxmhm.github.io/tags/ubuntu/>Ubuntu</a></li>
<li><a href=https://snitxmhm.github.io/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/>云服务器</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://snitxmhm.github.io/posts/arch%E7%B3%BBlinux%E9%9D%99%E6%80%81ip%E8%AE%BE%E7%BD%AE%E4%B8%8E%E5%9B%BA%E5%AE%9A/>
<span class=title>« Prev Page</span>
<br>
<span>Arch系linux静态ip设置与固定</span>
</a>
<a class=next href=https://snitxmhm.github.io/posts/%E4%B8%80%E6%AC%A1%E8%A7%A3%E5%86%B3%E6%89%80%E6%9C%89%E4%BB%A3%E7%90%86%E9%97%AE%E9%A2%98/>
<span class=title>Next Page »</span>
<br>
<span>一次解决所有代理问题</span>
</a>
</nav>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=https://snitxmhm.github.io/>The Long Farewell</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>